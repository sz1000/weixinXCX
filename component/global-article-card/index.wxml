<view class="container">
	<template
	 is="{{demo.type === 0 ? 'myDiary' : 'album' }}"
	 data="{{item,index,add,addBind,showIsJoin,haha}}"
	/>
</view>

<template name="album">
	<view class="{{add == true ? 'articleBox' : ''}}">
		<view class="showAreaTw">
			<view
			 class="CardArea album"
			 bindtap="{{add == true ? 'toYulan' : 'goDemo'}}"
			 data-article="{{item}}"
			>
				<view class="title">{{item.title}}</view>
				<view
				 class="img"
				 wx:if="{{item.imgArray.length <= 3}}"
				>
					<image
					 class="imgIconAlbum"
					 wx:for="{{[0,1]}}"
					 wx:key="imgItem"
					 wx:for-item="imgIndex"
					 mode="aspectFill"
					 src="{{item.imgArray[imgIndex]}}"
					 style="opacity:{{item.imgArray.length > imgIndex ? 100 : 0}};"
					/>
					<view
					 wx:if="{{item.copyId > 0}}"
					 class="fromLibrary"
					>来自素材库
					</view>
				</view>
				<view
				 class="img-Collections"
				 wx:if="{{item.imgArray.length > 3}}"
				>
					<view
					 wx:for="{{[0,1,2]}}"
					 wx:key="imgItem"
					 wx:for-item="imgIndex"
					 mode="aspectFill"
					 style="opacity:{{item.imgArray.length > imgIndex ? 100 : 0}};"
					>
						<image
						 class="imgIcon"
						 src="{{item.imgArray[imgIndex]}}"
						 mode="aspectFill"
						/>
						<div
						 class="mark"
						 wx:if="{{imgIndex == 2}}"
						>{{item.imgArray.length - 3}}+
						</div>
						<view
						 class="fromLibrary"
						 wx:if="{{imgIndex == 2 && item.copyId > 0}}"
						>来自素材库
						</view>
					</view>
				</view>
				<view class="personInfoBox">
					<image
					 mode="widthFill"
					 src="{{item.userAvatar}}"
					/>
					{{item.userName}}
				</view>
			</view>
			<!-- 绑定的商品和医生 -->
			<view
			 class="bindProject"
			 wx:if="{{item.productInfo != null}}"
			 data-product="{{item.productInfo.id}}"
			 bind:tap="goProductDetail"
			>
				<view class="rightBlock">
					<span class="buyIcon">购</span>
					<view class="projectName ellipsisOne">{{item.productInfo.name}}</view>
					<view class="orderNum">预约数:
						<text>{{item.productInfo.count}}</text>
					</view>
				</view>
				<view class="bindPrice">
					<span>￥</span>
					{{item.productInfo.price/100}}
				</view>
			</view>
			<view wx:if="{{item.doctorInfo != null}}">
				<view
				 class="personInfoBox"
				 style="margin-left:30rpx;"
				>
					<image
					 mode="widthFill"
					 src="{{item.doctorInfo.avatar}}"
					/>
					主治医生:{{item.doctorInfo.name}}
				</view>

			</view>
			<view
			 wx:if="{{!item.isCopy && !item.isSelf && showIsJoin}}"
			 class="menuJoin"
			 data-index="{{index}}"
			 data-status="{{item.isCollected}}"
			 bindtap="addMyMaterial"
			 data-article="{{item}}"
			 data-imgindex="{{item.id}}"
			 data-textid="{{item.articleId}}"
			>
				<image
				 class="imgAdd"
				 src="/static/icons/jiaru.png"
				/>
				加入我的素材
			</view>
			<view
			 wx:if="{{item.isCopy && !item.isSelf && showIsJoin}}"
			 class="menuJoin joinFontColor"
			>
				<image
				 class="imgAdd "
				 src="/static/icons/jiaruSuccess.png"
				/>
				已加入我的素材
			</view>
			<view
			 wx:if="{{item.isSelf && showIsJoin}}"
			 class="menuJoin joinFontColor"
			>
				<image
				 class="imgAdd "
				 src="/static/icons/jiaruSuccess.png"
				/>
				来自我的素材
			</view>
			<!-- 绑定结束 -->
			<view
			 class="menu"
			 wx:if="{{addBind}}"
			>
				<view
				 class="menuItem {{item.order > 0 ? 'topFontColor' : ''}}"
				 data-item="{{item}}"
				 bindtap="toTop"
				>
					<image
					 class="imgAdd"
					 src="/static/icons/zhiding{{item.order > 0 ? '_fill.png' : '.png'}}"
					 mode="aspectFit"
					/>
					{{item.order > 0 ? '取消置顶' : '置顶'}}
				</view>
				<!-- <view class="line">|</view>
      <view class="menuItem {{item.hide ==1 ? 'topFontColor' : ''}}" data-index="{{index}}" bind:tap="hideArticle"
        data-item="{{item}}">
        <image class="imgAdd" src="/static/icons/{{item.hide == 1 ? 'yincang_fill' : 'yincang'}}.png"
          mode="aspectFit" />
        {{item.hide == 1 ? '取消隐藏' : '隐藏' }}
      </view> -->

				<view class="line">|</view>
				<view
				 class="menuItem"
				 bindtap="delete"
				 data-item="{{item}}"
				>
					<image
					 class="imgDelete"
					 src="/static/icons/shanchu-5@2x.png"
					 mode="aspectFit"
					/>
					删除
				</view>
				<view class="line">|</view>

				<view
				 class="menuItem"
				 data-item="{{item}}"
				 bindtap="showModal"
				>
					<image
					 class="imgShare"
					 src="/static/icons/share2x.png"
					 mode="aspectFit"
					/>
					分享
				</view>
			</view>
		</view>
	</view>
</template>

<template name="myDiary">
	<view class="{{add == true ? 'articleBox' : ''}}">
		<view class="showAreaTw">
			<!-- <view class="card " wx:if="{{item.isCard}}">
        <text>名片</text>
      </view> -->
			<view
			 class="CardArea"
			 bindtap="{{add == true ? 'toYulan' : 'goDemo'}}"
			 data-article="{{item}}"
			>
				<view class="title">{{item.title}}</view>
				<view class="content">{{item.head_text}}</view>
				<view class="img">
					<image
					 class="imgIcon"
					 wx:for="{{[0,1]}}"
					 wx:key="imgItem"
					 wx:for-item="imgIndex"
					 mode="aspectFill"
					 src="{{item.cover_img[imgIndex]}}"
					 style="opacity:{{item.cover_img.length > imgIndex ? 100 : 0}};"
					/>
					<view
					 wx:if="{{item.copyId > 0}}"
					 class="fromLibrary"
					>来自素材库
					</view>
				</view>
				<view class="personInfoBox">
					<image
					 mode="widthFix"
					 src="{{item.user_avatar}}"
					/>
					{{item.user_name}}
				</view>
			</view>
			<!-- 绑定的商品 -->
			<view
			 class="bindProject"
			 wx:if="{{item.productInfo != null}}"
			 data-product="{{item.productInfo.id}}"
			 bind:tap="goProductDetail"
			>
				<view class="rightBlock">
					<span class="buyIcon">购</span>
					<view class="projectName ellipsisOne">{{item.productInfo.name}}</view>
					<view class="orderNum">预约数:
						<text>{{item.productInfo.count}}</text>
					</view>
				</view>
				<view class="bindPrice">
					<span>￥</span>
					{{item.productInfo.price/100}}
				</view>
			</view>
			<!-- 绑定的医生 -->
			<view wx:if="{{item.doctorInfo != null}}">
				<view
				 class="personInfoBox"
				 style="margin-left:30rpx;"
				>
					<image
					 mode="widthFill"
					 src="{{item.doctorInfo.avatar}}"
					/>
					主治医生:{{item.doctorInfo.name}}
				</view>

			</view>
			<!-- 绑定结束 -->
			<view
			 wx:if="{{!item.isCopy && !item.isSelf && showIsJoin}}"
			 class="menuJoin"
			 data-index="{{index}}"
			 data-status="{{item.isCollected}}"
			 bindtap="addMyMaterial"
			 data-article="{{item}}"
			 data-imgindex="{{item.id}}"
			 data-textid="{{item.articleId}}"
			>
				<image
				 class="imgAdd"
				 src="/static/icons/jiaru.png"
				/>
				加入我的素材
			</view>
			<view
			 wx:if="{{item.isCopy && !item.isSelf && showIsJoin}}"
			 class="menuJoin joinFontColor"
			>
				<image
				 class="imgAdd "
				 src="/static/icons/jiaruSuccess.png"
				/>
				已加入我的素材
			</view>
			<view
			 wx:if="{{item.isSelf && showIsJoin}}"
			 class="menuJoin joinFontColor"
			>
				<image
				 class="imgAdd "
				 src="/static/icons/jiaruSuccess.png"
				/>
				来自我的素材
			</view>
			<view
			 class="menu"
			 wx:if="{{addBind}}"
			>
				<view
				 class="menuItem {{item.order > 0 ? 'topFontColor' : ''}}"
				 data-item="{{item}}"
				 bindtap="toTop"
				>
					<image
					 class="imgAdd"
					 src="/static/icons/zhiding{{item.order > 0 ? '_fill.png' : '.png'}}"
					 mode="aspectFit"
					/>
					{{item.order > 0 ? '取消置顶' : '置顶'}}
				</view>
				<!-- <view class="line">|</view>
      <view class="menuItem {{item.hide ==1 ? 'topFontColor' : ''}}" data-index="{{index}}" bind:tap="hideArticle"
        data-item="{{item}}">
        <image class="imgAdd" src="/static/icons/{{item.hide == 1 ? 'yincang_fill' : 'yincang'}}.png"
          mode="aspectFit" />
        {{item.hide == 1 ? '取消隐藏' : '隐藏' }}
      </view> -->
				<view class="line">|</view>
				<view
				 class="menuItem"
				 bindtap="delete"
				 data-item="{{item}}"
				>
					<image
					 class="imgDelete"
					 src="/static/icons/shanchu-5@2x.png"
					 mode="aspectFit"
					/>
					删除
				</view>
				<view class="line">|</view>
				<view
				 class="menuItem"
				 data-item="{{item}}"
				 bindtap="showModal"
				>
					<image
					 class="imgShare"
					 src="/static/icons/share2x.png"
					 mode="aspectFit"
					/>
					分享
				</view>
			</view>
			<!-- 暂无数据 -->
		</view>
	</view>
</template>

